<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <title>Trinkspiele</title>
        <link rel="stylesheet"
              href="{{ url_for('static', filename = 'style.css') }}"
        />
        <script type="text/javascript"
                src="{{ url_for('static', filename = 'index.js') }}"
        ></script>
        <script defer
                src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
    </head>

    <body>
        <div x-data="data">
            <div x-show="error">
                <h1>Es ist ein Fehler aufgetreten...</h1>
                <pre x-text="error"></pre>
            </div>

            <div x-show="!error">
                <h1 x-text="titles[modeName]"></h1>

                <template x-if="modeName === 'home'">
                    <div>
                        <div class="btn-container">
                            <a class="btn"
                               x-text="titles.twoIdiots"
                               @click="modeName = 'twoIdiots';"
                            ></a>
                            <a class="btn"
                               x-text="titles.guess"
                               @click="modeName = 'guess';"
                            ></a>
                        </div>

                        <div class="btn-container">
                            <a class="btn"
                               x-text="titles.about"
                               @click="modeName = 'about';"
                            ></a>
                        </div>
                    </div>
                </template>

                <template x-if="modeName === 'about'">
                    <div x-init="await loadData();">
                        <i x-show="!about.data.length">Lade Informationen...</i>

                        <template x-if="about.data.length">
                            <div>
                                <p class="bubble">
                                    Entwickelt von Leon Thomanek und Luca Feigl in Darmstadt.
                                </p>
                                <p class="bubble bubble-answer">
                                    Wir verwenden:
                                    <br />
                                    Alpine.js v<span x-text="Alpine.version"></span>
                                    <i>(Frontend, Luca Feigl)</i>
                                    <br />
                                    Flask v<span x-text="about.data"></span>
                                    <i>(Backend, Leon Thomanek)</i>
                                    <br />
                                    <br />
                                    © <span x-text="new Date().getFullYear()"></span>
                                </p>

                                <div class="btn-container">
                                    <a class="btn"
                                       x-text="titles.addData"
                                       @click="window.location.href = '/add-data';"
                                    ></a>
                                    <a class="btn"
                                       @click="modeName = 'home';"
                                    >
                                        Zurück
                                    </a>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>

                <template x-if="modeName === 'twoIdiots'">
                    <div x-init="await loadData();">
                        <i x-show="!twoIdiots.data.length">Lade Kategorien...</i>

                        <template x-if="twoIdiots.data.length">
                            <div>
                                <p class="bubble"
                                   x-text="twoIdiots.data[twoIdiots.index].category"
                                ></p>

                                <div class="btn-container">
                                    <a class="btn"
                                       @click="incIndex();"
                                    >
                                        Nächste Kategorie
                                    </a>
                                    <a class="btn"
                                       @click="modeName = 'home';"
                                    >
                                        Zurück
                                    </a>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>

                <template x-if="modeName === 'guess'">
                    <div x-init="await loadData();">
                        <i x-show="!guess.data.length">Lade Schätzfragen...</i>

                        <template x-if="guess.data.length">
                            <div>
                                <p class="bubble"
                                   x-text="guess.data[guess.index].question"
                                ></p>
                                <p class="bubble bubble-answer"
                                   x-show="guess.answerVisible"
                                >
                                    <b x-text="guess.data[guess.index].answer"></b>
                                </p>
                                <p class="bubble"
                                   x-show="guess.answerVisible"
                                >
                                    <b>Funfact:</b>
                                    <i x-text="guess.data[guess.index].funfact"></i>
                                </p>

                                <div class="btn-container">
                                    <a class="btn"
                                       x-show="!guess.answerVisible"
                                       @click="guess.answerVisible = true;"
                                    >
                                        Antwort zeigen
                                    </a>
                                    <a class="btn"
                                       x-show="guess.answerVisible"
                                       @click="guess.answerVisible = false; incIndex();"
                                    >
                                        Nächste Schätzfrage
                                    </a>
                                    <a class="btn"
                                       @click="modeName = 'home';"
                                    >
                                        Zurück
                                    </a>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </body>
</html>
